;; system-7.5-windoid.lisp;; Adam Alpern <aalpern@hampshire.edu>; http://hampshire.edu/~adaF92/MCL/;; A windoid which uses the new windoid WDEF present in System 7.5 and above.; Version of 3/26/96;; Revision History; ----------------; 4/18/96 - Do explicit check of :system-7.5 in *features*; 3/26/96 - Calling #_getresource repeatedly by having it in the;           default-initargs may have been a memory leak. A handle to the;           WDEF is now stored in *system-7.5-windoid-wdef-handle*;  2/5/96 - initial version;(defvar *system-7.5-windoid-wdef-handle* nil)(eval-when (:load-toplevel :compile-toplevel :execute)  (labels ((system-7.5-check ()             (let ((version (getf ccl::*environs* :system-version)))               (when (string-equal version "7.5" :start1 0 :end1 3)                 (pushnew :system-7.5 *features*))))           (init-wdef-handle ()             (setf *system-7.5-windoid-wdef-handle* (#_getresource :|WDEF| 124))))    (system-7.5-check)    (when (member :system-7.5 *features*)      (init-wdef-handle))))(defclass system-7.5-windoid (windoid) ()  #+:system-7.5 (:default-initargs :windowdefproc *system-7.5-windoid-wdef-handle*                  :procid 32))(push #'(lambda ()          (setf *system-7.5-windoid-wdef-handle* (#_getresource :|WDEF| 124)))      *lisp-startup-functions*)